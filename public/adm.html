<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/jpg" href="assets/logo.jpg" />
    <title>Administração</title>

    <!-- Milligram CSS -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css"
    />

    <script src="/__/firebase/8.6.5/firebase-app.js"></script>
    <script src="/__/firebase/8.6.5/firebase-auth.js"></script>
    <script src="/__/firebase/8.6.5/firebase-firestore.js"></script>
    <script src="/__/firebase/init.js?useEmulator=true"></script>

    <link rel="stylesheet" href="style/global.css" />

    <script defer src="https://unpkg.com/alpinejs"></script>
    <script src="code/commom.js"></script>
    <script src="code/adm.js"></script>
  </head>
  <body>
    <header class="container">
      <h3>Administração</h3>
    </header>
    <main class="container" x-data="admin">
      <p>
        Logado no momento com o número
        <span x-text="userDB?.telefone"></span>
        .
      </p>
      <button class="button-outline" @click="encerrarSessao">
        Encerrar sessão
      </button>
      <hr />
      <details>
        <summary class="button">Jogos</summary>
        <h5>Gerenciamento de jogos</h5>
        <template x-if="jogoRodando">
          <div x-show="jogoGerenciavel">
            <button class="button-outline" @click="encerrarJogo">
              Cancelar jogo
            </button>
            <button class="button-outline" @click="chamarNumero">
              Chamar número
            </button>
            <p>
              Números chamados:
              <em x-text="ultimosNumeros"></em>
              <br />
              Último número:
              <em x-text="ultimoNumero"></em>
            </p>
            <p x-show="engano">
              Último engano
              <span x-text="engano"></span>
            </p>
          </div>
          <div x-show="! jogoGerenciavel">
            <p>Um jogo está em execução neste momento.</p>
          </div>
        </template>
        <div x-show="! jogoRodando">
          <button class="button-outline" @click="novoJogo">Criar jogo</button>
        </div>
        <div x-show="jogos.length">
          <h5>Histórico de jogos</h5>
          <template x-for="j in jogos">
            <details>
              <summary x-text="j.titulo"></summary>
              <p>
                Ganhador:
                <span x-text="j.ganhador.nome"></span>
              </p>
            </details>
          </template>
        </div>
      </details>
      <hr />
      <details>
        <summary class="button">Administradores</summary>
        <h5>Gerenciamento</h5>
        <button class="button-outline" @click="adicionarAdministrador">
          Adicionar
        </button>
        <h5>Consulta de administradores</h5>
        <template x-for="a in administradores">
          <details>
            <summary x-text="a.nome"></summary>
            <p>
              Telefone:
              <span x-text="a.telefone"></span>
              <br />
              Estado:
              <span x-text="a.estado"></span>
              <br />
              Município
              <span x-text="a.municipio"></span>
            </p>
            <button class="button-outline" @click="removerAdministrador(a.id)">
              Remover
            </button>
          </details>
        </template>
      </details>
      <hr />
      <details>
        <summary class="button">Usuários comuns</summary>
        <h5>Consulta de usuários</h5>
        <template x-for="u in usuarios">
          <details>
            <summary x-text="a.nome"></summary>
            <p>
              Telefone:
              <span x-text="a.telefone"></span>
              <br />
              Estado:
              <span x-text="a.estado"></span>
              <br />
              Município
              <span x-text="a.municipio"></span>
            </p>
          </details>
        </template>
      </details>
    </main>
  </body>
</html>
