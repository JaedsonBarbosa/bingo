<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <include src="modules/defHead.html"></include>
    <script defer type="module" src="code/login.ts"></script>
  </head>
  <body>
    <include src="modules/minHeader.html"></include>
    <main class="container" x-data="login" x-cloak>
      <h3 x-show="iniciadoLogado">Atualizar cadastro</h3>
      <h3 x-show="! iniciadoLogado">Iniciar sessão</h3>
      <form x-show="pedirTelefone" @submit.prevent="proximo">
        <label>
          Telefone (com DDD)
          <input x-model="telefone" minlength="8" required />
        </label>
        <input id="avancar" type="submit" />
      </form>
      <form
        x-data="{ codigo: '' }"
        x-show="pedirCodigo"
        @submit.prevent="logar(codigo)"
      >
        <label>
          Código
          <input x-model="codigo" minlength="4" required />
        </label>
        <input type="submit" />
      </form>
      <form x-show="exibir" @submit.prevent="atualizar">
        <label>
          Nome
          <input x-model="nome" minlength="2" required />
        </label>
        <label>
          Estado
          <select x-model="estado" required>
            <template x-for="e in ufs">
              <option x-text="e.Nome"></option>
            </template>
          </select>
        </label>
        <label>
          Município
          <select x-model="municipio" required>
            <template
              x-for="e in ufs.find(v => v.Nome == estado)?.Municipios ?? []"
            >
              <option x-text="e"></option>
            </template>
          </select>
        </label>
        <input type="submit" />
      </form>
    </main>
  </body>
</html>
