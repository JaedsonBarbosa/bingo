<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="assets/logo.png" />
    <title>Administração</title>

    <link rel="stylesheet" href="style/global.scss" />
    <script type="module" src="code/adm.ts"></script>
  </head>
  <body>
    <header class="container">
      <h3>Administração</h3>
    </header>
    <main class="container" x-data="admin" x-cloak>
      <p>
        Logado no momento com o número
        <span x-text="telefone"></span>
        .
      </p>
      <button class="button-outline" @click="encerrarSessao">
        Encerrar sessão
      </button>
      <a class="button button-outline" href="app.html">
        Sair do painel administrativo
      </a>

      <hr />
      <details>
        <summary class="button">Jogos</summary>
        <h5>Gerenciamento de jogos</h5>
        <div x-show="jogo">
          <div x-show="jogoGerenciavel">
            <button class="button-outline" @click="encerrarJogo">
              Cancelar jogo
            </button>
            <button class="button-outline" @click="chamarNumero">
              Chamar número
            </button>
            <p>
              Números chamados:
              <em x-text="ultimosNumeros"></em>
            </p>
            <p>
              Último número:
              <em x-text="ultimoNumero"></em>
            </p>
          </div>
          <div x-show="! jogoGerenciavel">
            <p>Um jogo está em execução neste momento.</p>
          </div>
        </div>
        <div x-show="! jogo">
          <button class="button-outline" @click="novoJogo">Criar jogo</button>
        </div>
        <div x-show="jogos.length">
          <h5>Histórico de jogos</h5>
          <template x-for="j in jogos">
            <details>
              <summary x-text="j.titulo"></summary>
              <p>
                Ganhador:
                <span x-text="j.ganhador.nome"></span>
              </p>
            </details>
          </template>
        </div>
      </details>
      <hr />
      <details>
        <summary class="button">Administradores</summary>
        <h5>Gerenciamento</h5>
        <button class="button-outline" @click="adicionarAdministrador">
          Adicionar
        </button>
        <h5>Consulta de administradores</h5>
        <template x-for="a in administradores">
          <details>
            <summary x-text="a.nome"></summary>
            <p>
              Telefone:
              <span x-text="a.telefone"></span>
              <br />
              Estado:
              <span x-text="a.estado"></span>
              <br />
              Município
              <span x-text="a.municipio"></span>
            </p>
            <button class="button-outline" @click="removerAdministrador(a.id)">
              Remover
            </button>
          </details>
        </template>
      </details>
      <hr />
      <details>
        <summary class="button">Usuários comuns</summary>
        <h5>Consulta de usuários</h5>
        <template x-for="u in usuarios">
          <details>
            <summary x-text="a.nome"></summary>
            <p>
              Telefone:
              <span x-text="a.telefone"></span>
              <br />
              Estado:
              <span x-text="a.estado"></span>
              <br />
              Município
              <span x-text="a.municipio"></span>
            </p>
          </details>
        </template>
      </details>
    </main>
  </body>
</html>
